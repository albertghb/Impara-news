(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5592],{40402:function(e,t,r){"use strict";r.d(t,{u_:function(){return v},r6:function(){return h},Lt:function(){return u.y}});var a=r(82729),n=r(85893),o=r(15483),i=r(31420),s=r(67814),l=r(93967),c=r.n(l),d=r(26793),u=r(13017),m=r(85950),p=r.n(m);let h=e=>{let{className:t,children:r,ruled:a}=e;return(0,n.jsx)("h4",{className:c()("mb-2 font-bold text-lg text-center md:text-left mt-5 md:mt-0 text-grey-black",a&&"border-b pb-4 border-grey-mid",t),children:r})};function f(){let e=(0,a._)(["language.close"]);return f=function(){return e},e}let v=e=>{let{children:t,className:r,transition:a=u.y.Zoom,large:l=!1,overlayClassName:m,...h}=e,{t:v}=(0,d.$)();return(0,n.jsx)(u.B,{...h,transition:a,className:c()(m,"md:p-10"),children:(0,n.jsxs)("div",{className:c()(p().modal,l&&p().large,"bg-white p-4 md:px-10 md:py-8 md:rounded-md overflow-auto shadow-md size-full md:size-auto box-border",r),"data-testid":"popup",children:[(0,n.jsx)(o.TRl,{variant:"dark",className:"mx-auto md:hidden"}),(0,n.jsx)("button",{className:"absolute text-2xl text-grey-mid right-5 top-3 md:right-10 md:top-8 hover:text-navy transition-colors",title:v(f()),onClick:h.onHide,children:(0,n.jsx)(s.G,{className:"fill-current",icon:i.NB})}),t]})})}},80029:function(e,t,r){"use strict";r.d(t,{LX:function(){return s},qV:function(){return l},yV:function(){return n}});var a,n,o=r(51624),i=r.n(o);let s=300;(a=n||(n={})).Zoom="zoom",a.Fade="fade",a.SlideDown="slide-down",a.Flyout="flyout",a.MobileReverseFlyout="mobile-reverse-flyout";let l={fade:{base:"transition-opacity",entering:"opacity-0",entered:"opacity-100",exiting:"opacity-0",exited:"opacity-0"},zoom:{base:i().zoom,entering:"scale-105 opacity-0",entered:"scale-100 opacity-1",exiting:"scale-105 opacity-0"},"slide-down":{base:"transition-transform",entering:i()["slide-top-out"],entered:"translate-y-0",exiting:i()["slide-top-out"]},flyout:{base:"absolute top-0 transition-transform right-0 transform",entering:"translate-x-full",entered:"translate-x-0",exiting:"translate-x-full"},"mobile-reverse-flyout":{base:"fixed top-0 transform transition-transform left-0 2xl:right-0 2xl:left-auto",entering:"-translate-x-full 2xl:translate-x-full",entered:"translate-x-0",exiting:"-translate-x-full 2xl:translate-x-full"}}},13017:function(e,t,r){"use strict";r.d(t,{B:function(){return m},y:function(){return c.yV}});var a=r(85893),n=r(93967),o=r.n(n),i=r(67294),s=r(26273),l=r(66791),c=r(80029),d=r(80703);let u=(e,t)=>o()("duration-".concat(c.LX),t.base,t[e]),m=e=>{let{show:t,onHide:r,children:n,transition:m=c.yV.Fade,alwaysRendered:p=!1,className:h,...f}=e,v=(0,i.useRef)(null),g=n.props,y=e=>r(e),w=c.qV[c.yV.Fade],x=c.qV[m];(0,l.Z)("keydown",e=>{t&&"Escape"===e.key&&y(e)});let b=()=>{t&&v.current&&v.current.focus()},C=(0,a.jsx)(s.ZP,{in:t,timeout:{appear:c.LX,exit:c.LX},onEntered:()=>{setTimeout(b,c.LX)},unmountOnExit:!p,children:e=>{let t=u(e,w),r=u(e,x);return(0,a.jsxs)("div",{...f,className:o()("fixed top-0 left-0 flex flex-col items-center size-full box-border z-50","exited"===e&&"pointer-events-none hidden",h),children:[(0,a.jsx)("button",{ref:v,className:o()("fixed left-0 top-0 size-full bg-black bg-opacity-50",t),onClick:y}),(0,i.cloneElement)(n,{...g,className:o()(g.className,r)})]})}});return p?C:(0,a.jsx)(d.X,{children:C})}},38828:function(e,t,r){"use strict";r.d(t,{hE:function(){return P}});var a,n,o=r(82729),i=r(85893),s=r(45429),l=r(15483),c=r(83109),d=r(93967),u=r.n(d),m=r(11163),p=r(67294),h=r(10708),f=r(87536),v=r(26793),g=r(70270),y=r(65688),w=r(9241),x=r(60697),b=r(40402);function C(){let e=(0,o._)(["enterprise-search.download-confirmation-prompt.client-name"]);return C=function(){return e},e}let j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((e,t,r)=>(e.push({key:r,value:t.id,text:t.name,option:r}),e),[])};(a=n||(n={}))[a.NotMandatory=0]="NotMandatory",a[a.Max=1]="Max",a[a.ISBN=2]="ISBN",a[a.FinanceCode=3]="FinanceCode",a[a.Digits=4]="Digits",a[a.MandatoryWithEmail=5]="MandatoryWithEmail",a[a.Date=6]="Date",a[a.Required=7]="Required";let E={7:{value:!0,message:"enterprise-search.download-confirmation-prompt.fill-out-field"},2:{value:/^(?=(?:\D*\d){10}(?:(?:\D*\d){3})?$)[\d-]+$/,message:"enterprise-search.download-confirmation-prompt.not-valid"},3:{value:/^([a-zA-Z0-9]{1}\/([a-zA-Z0-9]){4}\/([a-zA-Z0-9]){6}\.([a-zA-Z0-9]){4})$/i,message:"enterprise-search.download-confirmation-prompt.not-valid"},4:{value:/^\d{13}$/i,message:"enterprise-search.download-confirmation-prompt.not-valid"},6:{value:/^(0[1-9]|[12][0-9]|3[01])[/](0[1-9]|1[012])[/](19|20)\d\d$/i,message:"enterprise-search.download-confirmation-prompt.not-valid"}},N=e=>{switch(e){case 1:return{maxLength:128,required:E[7]};case 2:return{maxLength:13,pattern:E[2],required:E[7]};case 3:return{pattern:E[3],required:E[7]};case 4:return{pattern:E[4],required:E[7]};case 6:return{pattern:E[6],required:E[7]};default:return{}}},k=(e,t,r)=>{let{t:a}=(0,v.$)();return e.map(e=>{var n,o;let s=(null===(n=r[e.name])||void 0===n?void 0:n.message)?a((null===(o=r[e.name])||void 0===o?void 0:o.message)||""):"";return(0,i.jsx)("div",{className:"mt-5",children:(0,i.jsx)(x.U,{required:!!N(e.validation).required,label:e.description,errorMessage:s,maxLength:N(e.validation).maxLength,...t(e.name,N(e.validation))})},e.name)})},P=e=>{var t,r;let{show:a,onHide:n,userDetails:o,downloadHandler:d,defaultProjectRef:E,isAdditionalDetails:N=!1,product:P}=e,{t:I}=(0,v.$)(),D=(0,m.useRouter)(),S=(null==D?void 0:D.pathname)==="/shopping-cart",[A]=(0,h.Z)([g.Xc]),T=!(null==o?void 0:o.bespokeDetails.length)||(null==o?void 0:o.isAdGroup),R=null==o?void 0:o.bespokeDetails.reduce((e,t)=>({...e,[t.name]:""}),{}),q=T?{reference:E,adClientId:A[g.Xc],...R}:{...R},{register:M,handleSubmit:O,reset:L,formState:U,control:_}=(0,f.cI)({defaultValues:q,shouldFocusError:!1}),Z=O(e=>d(e)),{errors:V}=U,[B,z]=(0,p.useState)(!1),F=(null==P?void 0:P.type)===c.ProductType.Video;p.useEffect(()=>{a&&L(q)},[a]);let W=(0,p.useMemo)(()=>(null==P?void 0:P.restriction)||(null==P?void 0:P.isNews),[P]),$=(0,p.useMemo)(()=>T&&N,[T,N]);return(0,i.jsxs)(b.u_,{alwaysRendered:!0,show:a,onHide:n,overlayClassName:"h-full",className:u()("overflow-hidden flex flex-col max-h-full",{"md:!w-fit":W&&$}),children:[(0,i.jsx)(b.r6,{children:I("enterprise-search.download-confirmation-prompt.title")}),(0,i.jsxs)("div",{className:u()("flex flex-col gap-3 max-h-full overflow-hidden",{"md:flex-row":W&&$}),children:[W&&(0,i.jsx)("div",{className:u()("flex-1 max-h-fit overflow-hidden",{"md:!max-h-[340px] md:w-[350px]":$&&W}),id:"consent-box",children:(0,i.jsx)(s.a7,{data:(0,s.er)(I,S?s.H5.CartProductPopupConsent:F?s.H5.VideoPopupConsent:s.H5.ImagePopupConsent,!0),boxActive:B,handleChange:e=>{z(void 0===e?!B:e)},className:"!pr-2 overflow-hidden h-full",contentWrapper:"pr-2 overflow-auto h-full [&::-webkit-scrollbar-thumb]:bg-gray-700 [&::-webkit-scrollbar-track]:bg-gray-200  [&::-webkit-scrollbar]:w-1.5 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:rounded-full"})}),(0,i.jsxs)("div",{className:u()("max-h-fit pr-2 overflow-auto h-full [&::-webkit-scrollbar-thumb]:bg-gray-700 [&::-webkit-scrollbar-track]:bg-gray-200  [&::-webkit-scrollbar]:w-1.5 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:rounded-full",{"md:w-[350px]":$&&W}),children:[(null==o?void 0:o.isAdGroup)?(0,i.jsx)("div",{className:"mt-5",children:(0,i.jsx)(f.Qr,{name:"adClientId",control:_,rules:{required:{value:!0,message:I("enterprise-search.download-confirmation-prompt.enter-client-name")}},render:e=>{var t;return(0,i.jsx)(w.F,{required:!0,options:j(null==o?void 0:o.adUsers),value:e.field.value,onBlur:e.field.onBlur,onChange:e.field.onChange,errorMessage:null===(t=V.adClientId)||void 0===t?void 0:t.message,label:I(C())})}})}):k((null==o?void 0:o.bespokeDetails)||[],M,V),$&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"text-base mt-5 md:mt-0",children:I("enterprise-search.download-confirmation-prompt.subtitle")}),(0,i.jsx)("div",{className:"mt-5",id:"more-details",children:(0,i.jsx)(x.U,{required:!0,label:I("enterprise-search.download-confirmation-prompt.placeholder-reference"),errorMessage:null===(t=V.reference)||void 0===t?void 0:t.message,...M("reference",{required:{value:!0,message:I("enterprise-search.download-confirmation-prompt.enter-reference")}}),defaultValue:E,"data-testid":"download_preference"})}),(0,i.jsx)("div",{className:"mt-5",children:(0,i.jsx)(x.U,{isMultiline:!0,label:I("enterprise-search.download-confirmation-prompt.placeholder-comments"),errorMessage:null===(r=V.comment)||void 0===r?void 0:r.message,...M("comment",{}),"data-testid":"comments"})})]}),(0,i.jsxs)("div",{className:"flex mt-5 max-h-fit",children:[(0,i.jsx)(l.Yd2,{disabled:!!(((null==P?void 0:P.restriction)||(null==P?void 0:P.isNews))&&!B),primary:!0,size:l.qE.Large,"data-testid":"download-image-button",onClick:e=>{if(B&&(0,y.L9)({action:y.aU.EnableChkBoxDownloadConfirmationPopup,event:y.ju.Click,label:y.D_.DownloadConfirmationPopupCheckboxEnable,category:F?y.WD.VideoPageInteractions:y.WD.ImagePageInteractions}),N){Z(e),B&&(0,y.L9)({event:y.ju.Click,action:y.aU.DownloadRestrictionBanner,category:y.WD.ShoppingCartInteractions,label:y.D_.EnableChkboxRestrictionConsent});return}d({},P)},className:"flex items-center justify-center w-full mr-8 font-bold 3xs:text-base",children:I("enterprise-search.download-confirmation-prompt.download")}),(0,i.jsx)(l.Yd2,{onClick:n,size:l.qE.Large,className:"flex items-center justify-center w-full font-bold 3xs:text-base",children:I("enterprise-search.download-confirmation-prompt.cancel")})]})]})]})]})}},66558:function(e,t,r){"use strict";r.d(t,{e:function(){return u},h:function(){return m}});var a=r(85893),n=r(15483),o=r(87536),i=r(26793),s=r(65688),l=r(9001),c=r(60697),d=r(40402);let u="password",m=e=>{var t;let{show:r,onHide:m,onSubmit:p}=e,{t:h}=(0,i.$)(),{register:f,handleSubmit:v,formState:g,setError:y}=(0,o.cI)({shouldFocusError:!1}),{errors:w}=g;return(0,a.jsxs)(d.u_,{alwaysRendered:!0,show:r,onHide:m,children:[(0,a.jsx)(d.r6,{ruled:!0,children:h("enterprise-search.password-confirmation-prompt.title")}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"mt-5",children:(0,a.jsx)(c.U,{required:!0,type:"password",label:h("enterprise-search.password-confirmation-prompt.placeholder-password"),"data-testid":"password-input",errorMessage:null===(t=w.password)||void 0===t?void 0:t.message,...f(u,{required:{value:!0,message:h("enterprise-search.password-confirmation-prompt.incorrect-password")}})})})}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("a",{href:"/forgot-password/",target:"_blank",className:"mr-5 text-sm border-0 md:inline-block highlighted-link",children:h("enterprise-search.password-confirmation-prompt.forgot-password")})}),(0,a.jsx)("div",{className:"flex mt-5",children:(0,a.jsx)(n.Yd2,{primary:!0,size:n.qE.Large,onClick:v(e=>{p(e,y),(0,s.L9)({event:l.ju.Click,action:l.aU.CTACLick,category:l.WD.ShoppingCartInteractions,label:l.qB.PasswordConfirmation})}),"data-testid":"confirm-password-button",className:"flex items-center justify-center w-1/2 mr-8 font-bold 3xs:text-base",children:h("enterprise-search.password-confirmation-prompt.continue")})})]})}},93839:function(e,t,r){"use strict";r.d(t,{Zl:function(){return v},oZ:function(){return f},wu:function(){return n}});var a,n,o=r(85893),i=r(45429),s=r(11163),l=r(67294),c=r(10708),d=r(38828),u=r(66558),m=r(70270),p=r(41181),h=r(37087);(a=n||(n={})).AddToCart="add-to-cart",a.BuyNow="buy-now";let f=(0,l.createContext)({cart:{count:0},setCart:()=>{},cartActiveAction:null,whileAddingToCart:()=>Promise.resolve(),whileBuyingNow:()=>Promise.resolve(),downloadHandler:()=>Promise.resolve(),setSelctedProduct:()=>{},setUser:()=>{}}),v=e=>{let{cart:t,children:r}=e,a=(0,s.useRouter)(),{products:n}=(0,l.useContext)(i.oZ),[v,g]=(0,l.useState)(t),[y,w]=(0,h.$)(),[x,b]=(0,h.$)(),[C,j]=(0,l.useState)({}),[E,N]=(0,l.useState)({}),[k,P]=(0,l.useState)(!1),[I,D]=(0,l.useState)(!1),S={isAdGroup:!!(null==E?void 0:E.isAdGroup),adUsers:(null==E?void 0:E.adUsers)||[],bespokeDetails:(null==E?void 0:E.bespokeDetails)||[]},[A]=(0,c.Z)(),{verifySession:T,downloadImageSubmitHandler:R,passwordConfirmationSubmitHandler:q,createBDOHandler:M}=(0,p.q)(C,D,P,!!(null==E?void 0:E.additionalDetails),E,n),O=(null==a?void 0:a.pathname)==="/shopping-cart",L=async()=>{await T((null==E?void 0:E.additionalDetails)?void 0:C)};return(0,l.useEffect)(()=>{g(t)},[t]),(0,o.jsxs)(f.Provider,{value:{cart:v,setCart:g,cartActiveAction:y&&"add-to-cart"||x&&"buy-now"||null,whileAddingToCart:w,whileBuyingNow:b,downloadHandler:L,setSelctedProduct:j,setUser:N},children:[r,(0,o.jsx)(d.hE,{userDetails:S,product:C,show:k,onHide:()=>P(!1),downloadHandler:O?M:R,defaultProjectRef:A[m.WM],isAdditionalDetails:!!(null==E?void 0:E.additionalDetails)}),(0,o.jsx)(u.h,{show:I,onHide:()=>D(!1),onSubmit:q})]})}},78429:function(e,t,r){"use strict";r.d(t,{Y:function(){return i}});var a=r(83109),n=r(67294);let o={layoutData:{currency:a.CurrencyCode.GBP,countryCode:null,contactNumber:"",imageCount:0,isDefaultData:!0}},i=(0,n.createContext)(o)},49782:function(e,t,r){"use strict";r.d(t,{ET:function(){return i},tP:function(){return o}});var a=r(85893),n=r(67294);let o=(0,n.createContext)({lightboxes:[],setLightboxes:()=>{}}),i=e=>{let{lightboxes:t,children:r}=e,[i,s]=(0,n.useState)(t);return(0,n.useEffect)(()=>{s(t)},[t]),(0,a.jsx)(o.Provider,{value:{lightboxes:i,setLightboxes:s},children:r})}},41181:function(e,t,r){"use strict";r.d(t,{q:function(){return S}});var a=r(45429),n=r(98005),o=r(83109),i=r(11163),s=r(80129),l=r(67294),c=r(10708),d=r(26793),u=r(66558),m=r(70270),p=r(8020),h=r(13633),f=r(9001),v=r(18518),g=r(68882),y=r(55419),w=r(35974),x=r(2841),b=r(74561),C=r(61802),j=r(29914),E=r(6309),N=r(23080),k=r(4082),P=r(12433);let I=()=>(0,l.useContext)(P.N).session,D=e=>Object.keys(e).reduce((t,r)=>t?"".concat(t,"^^").concat(r,"||").concat(e[r]):"".concat(r,"||").concat(e[r]),""),S=function(e,t,r){var P,S;let A=arguments.length>3&&void 0!==arguments[3]&&arguments[3],T=arguments.length>4?arguments[4]:void 0,R=arguments.length>5?arguments[5]:void 0,q=(0,C.h)(),M=(0,k.b)(),{countryCode:O}=(0,N.Q)(),[L,U]=(0,c.Z)(),{t:_}=(0,d.$)(),Z=(0,i.useRouter)(),V=I(),B=(0,E.ev)(),z=(0,j.D)(),[F,W]=(0,l.useState)({}),$=(null==Z?void 0:Z.pathname)==="/shopping-cart",G=(null===(P=L[w.d0])||void 0===P?void 0:P.toUpperCase())||(null==T?void 0:null===(S=T.territoryId)||void 0===S?void 0:S.toUpperCase())||O,H=e=>{let t=(0,x.PM)();e.forEach(e=>{U(e.name,e.value,{path:e.path,secure:e.secure,domain:t})})},X=async e=>{let t=await (0,a.to)(),r=(null==t?void 0:t.lineItems.map(e=>{var t,r;return{Id:e.id,ProductId:null===(r=e.custom)||void 0===r?void 0:null===(t=r.fields)||void 0===t?void 0:t.alamy_assetId,ProductType:(0,b.Wv)(e)?f.C0.Video:f.C0.Image}}))||[],n={OrderId:(null==t?void 0:t.id)||"",LangCode:M,CountryCode:G||"",Items:r,PurchaseOrderRef:(null==e?void 0:e.reference)||"",Comments:(null==e?void 0:e.comment)||""};(null==e?void 0:e.adClientId)&&U(m.Xc,e.adClientId),(null==e?void 0:e.reference)&&U(m.WM,e.reference),(await (0,h.VC)(q)(n)).success&&t&&(await (0,a.Gs)(t),window.location.href=(0,p.q)(p.A.DownloadedImages,M),(0,v.Tj)(R))},Y=async(t,a,i)=>{var l,c,d,u,p,f,b;let C;let j=A?e:a,E={isBot:z,locale:M,seqOrRef:(null==j?void 0:null===(l=j.altids)||void 0===l?void 0:l.seq)||""},{data:N}=await (0,h.wv)(q)(E,!1);if((null==j?void 0:j.type)===o.ProductType.Video){let e={videoId:null!==(d=null==j?void 0:null===(c=j.altids)||void 0===c?void 0:c.id)&&void 0!==d?d:"",projectReference:t.reference,comments:t.comment};C=await (0,h.AI)(q)(e)}else{let e=(0,s.parse)(L[w.mh]||""),r=w.wC.map(t=>t===w.n2?(0,x.SS)(e[w.eI],e[w.Qy]):e[t]||""),a={imageId:(null==j?void 0:null===(u=j.altids)||void 0===u?void 0:u.id)||"",imageRef:(null==j?void 0:null===(p=j.altids)||void 0===p?void 0:p.ref)||"",isVector:(null==j?void 0:null===(f=j.meta)||void 0===f?void 0:f.picturetype)===o.PictureType.Vector,isLibraryDownload:(null==j?void 0:j.apaLib)===n.ApaLib.LIBRARY,langCode:M,countryCode:G,imageBin:(null==N?void 0:N.renditions)?(0,y.Z2)(N.renditions):0,isNews:(null==j?void 0:j.isNews)||!1,userComments:t.comment||"",projectRef:t.reference||"",iqExtraDetailDesc:!t.reference&&D(t)||"",authOcd:(null==i?void 0:i.value)||L.AuthOCD||(null==F?void 0:F.value),pageNo:"".concat((0,x.rg)(Z)),searchNo:V.id||"",isIntranet:B,licenseType:null==j?void 0:null===(b=j.meta)||void 0===b?void 0:b.licencetype,adClientId:t.adClientId||"",searchId:r.join("")};t.adClientId&&U(m.Xc,t.adClientId),t.reference&&U(m.WM,t.reference),C=await (0,h.GN)(q)(a)}C.availableForDownload&&((0,g.E)(C.downloadUrl),r(!1),(0,v.ZA)(e),W({}))},Q=async e=>{let a={userId:null==T?void 0:T.id,authOcd:L.AuthOCD||null,downloadType:"image",isIntranet:B};if(!L.AuthOCD){t(!0);return}if((await (0,h.uT)(q)(a)).showPasswordPrompt)t(!0);else{if(A||(null==e?void 0:e.restriction)||(null==e?void 0:e.isNews)){r(!0);return}$?await X():await Y({},e,{value:L.AuthOCD})}};return{passwordConfirmationSubmitHandler:async(a,n)=>{let o={userId:((null==T?void 0:T.id)||"").toUpperCase(),cid:null,password:a[u.e],downloadType:"image"};try{let a=await (0,h.ZY)(q)(o);if(a.cookies){if(t(!1),H(a.cookies),A||(null==e?void 0:e.restriction)||(null==e?void 0:e.isNews)){r(!0),W(a.cookies.find(e=>"AuthOCD"===e.name));return}$?await X():await Y({},e,a.cookies.find(e=>"AuthOCD"===e.name))}}catch(e){n(u.e,{type:"value",message:_("enterprise-search.password-confirmation-prompt.incorrect-password")})}},downloadImageSubmitHandler:Y,verifySession:Q,createBDOHandler:X}}},23080:function(e,t,r){"use strict";r.d(t,{Q:function(){return o}});var a=r(67294),n=r(78429);let o=()=>(0,a.useContext)(n.Y).layoutData},16321:function(e,t,r){"use strict";r.d(t,{e:function(){return f}});var a=r(82729),n=r(85893),o=r(67294),i=r(26793),s=r(49782),l=r(19473);let c=(e,t)=>t<3?"...":e.length>t?"".concat(e.slice(0,t-3).trim()).concat("..."):e;var d=r(61802),u=r(12421),m=r(62852);function p(){let e=(0,a._)(["lightbox.view-lightbox"]);return p=function(){return e},e}let h=e=>{let{lightbox:t}=e,{t:r}=(0,i.$)();return(0,n.jsxs)("div",{className:"flex flex-col items-start",children:[c(r("lightbox.save-success-toast",{lightboxName:t.name}),31),(0,n.jsx)("a",{href:"".concat((0,u.W)(u.A.LightboxDetails),"?lbId=").concat(t.id),className:"highlighted-link",children:r(p())})]})},f=()=>{let{showToast:e}=(0,m.e)(),{lightboxes:t,setLightboxes:r}=(0,o.useContext)(s.tP),a=(0,d.h)(),i=t=>{e((0,n.jsx)(h,{lightbox:t}),{style:m.j.Success})},c=async()=>r(await (0,l.RK)(a)());return{currentLightbox:t.find(e=>e.isCurrent),lightboxes:t,updateLightboxes:c,addToLightbox:async(e,t)=>(i(await (0,l.S7)(a)(e,t)),c()),createNewLightboxWithProduct:async(e,t)=>(i(await (0,l.Rg)(a)(e,t)),c())}}},37087:function(e,t,r){"use strict";r.d(t,{$:function(){return o}});var a=r(67294),n=r(87636);let o=()=>{let[e,t]=(0,a.useState)(!1),r=async r=>{if(!e){t(!0);try{await r()}catch(e){(0,n.S3)(e),t(!1)}t(!1)}};return[e,r]}},13990:function(e,t,r){"use strict";r.d(t,{f:function(){return u}});var a=r(67294),n=r(10708),o=r(50408),i=r(40058),s=r(3685),l=r(4082),c=r(35804),d=r(15798);let u=e=>{let t=(0,d.a)(),r=(0,l.b)(),{countryName:u}=(0,c.m)(),{isPPMEnabled:m}=(0,a.useContext)(o.T),[p]=(0,n.Z)([s.B$,s.iZ]);return("true"===p.isPPMEnabled||m)&&!u&&(0,i.Z)(r,t,e,p)}},62852:function(e,t,r){"use strict";r.d(t,{e:function(){return o},j:function(){return n.jf}});var a=r(67294),n=r(44647);let o=()=>(0,a.useContext)(n.rZ)},13633:function(e,t,r){"use strict";r.d(t,{AI:function(){return G},GN:function(){return W},Lm:function(){return V},PN:function(){return H},SE:function(){return P},SF:function(){return I},Tm:function(){return T},V7:function(){return U},VC:function(){return $},ZY:function(){return F},bE:function(){return B},dy:function(){return Z},ew:function(){return D},fR:function(){return k},kq:function(){return X},n6:function(){return O},pc:function(){return M},s3:function(){return R},tN:function(){return _},uM:function(){return L},uT:function(){return z},uX:function(){return q},wv:function(){return N}});var a=r(84173),n=r(83109),o=r(56647),i=r(31955),s=r(36235),l=r(79485),c=r(79555),d=r(84115),u=r(55406),m=r(11237),p=r(53316),h=r(82294),f=r(87636),v=r(98173),g=r(35974),y=r(86898),w=r(37669),x=r(2841);let b="15D043F6-DA10-4BD3-9105-F1A5076E2867",C=(e,t)=>{let{locale:r,isBot:a,type:n,geo:o,page:i,pn:l,ps:u,nasty:m,editorial:h,lightbox:f,rmuid:v,translate:y,sessionid:w,offset:b,hidecontributor:C,social:j}=t,E=s.Yz.reduce((t,r)=>{let a=e[r],n=r===g.A6&&Array.isArray(a)&&a.map(e=>"USA"===e?"us":e.toLowerCase()).join(","),o="ethnicity"===r&&Array.isArray(a)&&a.join(",");return Array.isArray(a)?{...t,[r]:n||o||a.join(",")}:t},e),N=Number(null==E?void 0:E.imgt)===p.lJ.AllImages;return{...E,[g.D2]:f?void 0:E[g.D2],qt:(0,x.ZG)(E.qt),hc:(0,d.Ey)(E.hc,"5"),frrate:(0,d.Ey)(E.frrate,"50"),res:(0,d.Ey)(E.res,"4k"),durend:(null==E?void 0:E.durend)>=c.AW?c.t:null==E?void 0:E.durend,imgt:N?void 0:E.imgt,langcode:r,isbot:a,type:n,geo:o,pn:l||i,ps:u,page:void 0,nasty:m,editorial:h,lightbox:f,rmuid:v,translate:y,sessionid:w,offset:b,ispartial:!0,hidecontributor:(null==C?void 0:C.join(","))||void 0,social:j}},j=(e,t)=>{let{locale:r,geo:n,page:o,pn:l,ps:c,nasty:u,editorial:m,lightbox:h,sessionid:f,rmuid:v,social:y,hidecontributor:w,isBot:C}=t,j=s.Yz.reduce((t,r)=>{let a=e[r];return Array.isArray(a)?{...t,[r]:a.join(",")}:t},e),E=Number(null==j?void 0:j.imgt)===p.lJ.AllImages,N=Array.isArray(w)?[...w]:[];0!==e.paimages||N.includes(b)||N.push(b);let k=N.length>0?N.join(","):void 0,P={...j,[g.D2]:h?void 0:j[g.D2],qt:(0,x.ZG)(j.qt),hc:(0,d.Ey)(j.hc,"5"),imgt:E?void 0:j.imgt,langcode:r,geo:n,pn:l||o,ps:c,page:void 0,nasty:u,editorial:m,sessionid:f,rmuid:v,social:y,hideContributor:k,isbot:C},I=(0,a.getV1ToV2Params)(P),D=i.Z.get("minScore"),S=i.Z.get("disableRerank");return{...I,count:!0,...D&&{minScore:D},..."true"===S&&{disableRerank:!0},...e.lexical&&{lexical:!0}}},E=e=>{let{locale:t,isBot:r,ps:a,pn:n,productType:o,isProductUI:i}=e;return{lan:t,bot:r,ps:a,pn:n,type:o,isProductUI:i}},N=e=>function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.get("products/".concat(t.seqOrRef),{params:E({...t,isProductUI:!0}),...r?{}:{validateStatus:null}})},k=e=>async(t,r)=>{try{return(await e.post("products/aggregate",t,r)).data}catch(e){throw Error(e.message)}},P=e=>function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.get("products/".concat(t.seqOrRef),{params:E({...t,productType:n.ProductType.Video,isProductUI:!0}),...r?{}:{validateStatus:null}})},I=e=>async function(t,r){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{locale:i,isBot:s}=t,l=E({...t,ps:(null==t?void 0:t.ps)||("de"===i&&s?25:13),pn:(null==t?void 0:t.pn)||1}),c=l.type||n.ProductType.Picture,d=c===n.ProductType.Picture&&(null==r?void 0:r.imgt)?{imgt:null==r?void 0:r.imgt}:{},{geo:u,headline:m,user:p,isSSR:h}=r||{};try{let o=(await e.get("v1/search/".concat(t.seqOrRef,"/similar/"),{timeout:a?150:0,params:{...l,geo:u||"GB",headline:m||"",type:c,langcode:l.lan,audienceType:null==p?void 0:p.audienceType,silo:null==p?void 0:p.silo,hidePA:null==p?void 0:p.hidePA,hideDataco:null==p?void 0:p.hideDataco,customScheme:null==p?void 0:p.customScheme,...d,isSSR:!!h,isbot:l.bot,isUserLoggedOut:null==r?void 0:r.isUserLoggedOut}})).data;return{similarProducts:c===n.ProductType.Picture?(0,w.px)(null==o?void 0:o.items,l.lan,!0):(0,w.Bh)(null==o?void 0:o.items),totalMatches:(null==o?void 0:o.totalMatches)||0}}catch(r){let e=r.response;return a&&r.code===v.SM.RequestTimeout?(0,f.S3)(new v.bW(t.seqOrRef),!1):e&&e.status===o.W.TOO_MANY_REQUESTS?(0,f.S3)(new v.uu(t.seqOrRef),!1):(0,f.S3)(r),null}},D=e=>async(t,r)=>{try{return(await e.get("products/".concat(t.seqOrRef,"/same-contributor/"),{params:{...E(t),qt:r}})).data}catch(e){throw Error(e.message)}},S=e=>async(t,r)=>{try{return(await e.get("lightboxes/".concat(t),{params:r})).data}catch(e){throw Error(e.message)}},A=e=>"v2"===(0,y.v)(e.cookies)&&(null==e?void 0:e.type)!==n.ProductType.Video,T=e=>async(t,r)=>{try{let a=(await Promise.allSettled(t.map(t=>S(e)("".concat(t.lightboxId),{...r,ps:t.numberOfImages})))).map(e=>"rejected"===e.status?null:e.value).filter(e=>null!==e);if(!a.length)throw Error("No lightboxes were found");return a}catch(e){throw Error(e.message)}},R=e=>async(t,r)=>{let{locale:a,isBot:n,type:o}=r;try{return(await e.get("products",{params:{...t,lan:a,bot:n,type:o}})).data.items}catch(e){throw Error(e.message)}},q=e=>async(t,r)=>{try{let a=A(r),n=a?j(t,r):C(t,r);return(await e.get("".concat(a?"v2":"v1","/search"),{params:n})).data}catch(e){throw Error(e.message)}},M=e=>async t=>{try{return(await Promise.all(t.map(t=>e.get("v1/search",{params:C(t.queryParams,t.searchParams)})))).map((e,r)=>({searchQuery:t[r].searchQuery,response:e.data}))}catch(e){throw Error(e.message)}},O=e=>async(t,r)=>{try{if(A(r)){let{libraryCount:a,discountCount:n}=(await e.get("v2/search",{params:{...j(t,r)}})).data;return[{totalMatches:a},{totalMatches:n}]}return(await e.get("v1/search/images-library-count",{params:C(t,r)})).data}catch(e){throw Error(e.message)}},L=e=>async function(t,r){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{return(await e.get("v1/search/suggest",{params:{qt:t,lan:r,related:a}})).data}catch(e){throw Error(e.message)}},U=e=>async(t,r)=>{let a={imageId:t.imageid||"",altRef:r,pageNumber:Number(t.pn),searchQuery:t.srch,searchId:t.searchId};try{await e.post("rankmeasures",{...a})}catch(e){(0,f.S3)(e)}},_=e=>async(t,r,a)=>{try{let n=await Promise.resolve(q(e)({...r,[g.D2]:t},a));return{collectionType:t,items:(0,w.px)(n.items,a.locale),totalMatches:n.totalMatches}}catch(e){throw Error(e.message)}},Z=e=>async(t,r,a)=>{try{let n=await Promise.resolve(q(e)({...r,[g.D2]:t},a));return{collectionType:t,item:(0,w.px)(n.items,a.locale)[0],totalMatches:n.totalMatches}}catch(e){throw Error(e.message)}},V=e=>async(t,r)=>{try{let[a,n,o,i]=await Promise.all([l.yl.Ultimate,l.yl.Vital,l.yl.Uncut,l.yl.Foundation].map(a=>q(e)({...t,[g.D2]:a},r)));return[{collectionType:l.yl.Ultimate,items:(0,w.px)(a.items,r.locale),totalMatches:a.totalMatches},{collectionType:l.yl.Vital,items:(0,w.px)(n.items,r.locale),totalMatches:n.totalMatches},{collectionType:l.yl.Uncut,items:(0,w.px)(o.items,r.locale),totalMatches:o.totalMatches},{collectionType:l.yl.Foundation,items:(0,w.px)(i.items,r.locale),totalMatches:i.totalMatches}]}catch(e){throw Error(e.message)}},B=e=>async(t,r)=>{let a=A(r)?"v2":"v1";return A(r)?(await e.get("".concat(a,"/search"),{params:{...j(t,r),agencySearch:!0}})).data:(await e.get("v1/search/agencies",{params:C(t,r)})).data},z=e=>async t=>{try{return(await e.post("showPrompt",t)).data}catch(e){throw Error(e.message)}},F=e=>async t=>{try{return(await e.post("verifyUserPassword",t)).data}catch(e){throw Error(e.message)}},W=e=>async t=>{try{return(await e.post("downloadProcessing",t)).data}catch(e){throw Error(e.message)}},$=e=>async t=>{try{return(await e.post("downloadProcessing/createBulkDownloadOrder",t)).data}catch(e){throw Error(e.message)}},G=e=>async t=>{try{try{return(await e.get("downloadProcessingVideo",{params:t})).data}catch(e){throw Error(e.message)}}catch(e){throw Error(e.message)}},H=async(e,t)=>{let r=[];for(let i=0;i<e.length;i+=t){let s=e.slice(i,i+t);try{var a,n,o;let e=await fetch("".concat(null===(a=(0,u.b)())||void 0===a?void 0:a.bulkApiUrl,"/products/v1/?ids=").concat(s.join(","),"&langcode=en"));if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();null==t||null===(o=t.data)||void 0===o||null===(n=o.items)||void 0===n||n.map(e=>r.push({assetType:"image",assetId:e.ImageId,assetRef:e.ImageRef,assetSeq:e.ImageSeq,licenseType:e.LicenseType,isEditorialOnly:e.IsEditorialOnly,geoRestrictions:e.GeoRestrictions||[],assetStatus:e.ImageStatus,searchCollectionId:e.SearchCollectionId}))}catch(e){console.error("Error processing chunk starting at index ".concat(i,":"),e)}}return r},X=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.M.MAIN,a=[];for(let n=0;n<e.length;n+=t){let o=e.slice(n,n+t);try{await Promise.all(o.map(e=>fetch("".concat((0,u.b)().apiUrl,"/products/").concat(e,"/?type=video&cartType=").concat(r)).then(e=>{if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return e.json()}).then(e=>{var t,r,n,o,i,s,l;a.push({assetType:e.type,assetSubType:e.renditions&&(0,h.MR)(Object.keys(e.renditions)),assetId:null===(t=e.altids)||void 0===t?void 0:t.id,assetRef:null===(r=e.altids)||void 0===r?void 0:r.ref,assetSeq:null===(n=e.altids)||void 0===n?void 0:n.seq,licenseType:null===(o=e.meta)||void 0===o?void 0:o.licencetype,isEditorialOnly:null===(s=e.meta)||void 0===s?void 0:null===(i=s.restrictions)||void 0===i?void 0:i.restrictedForEditorialUse,assetStatus:null===(l=e.meta)||void 0===l?void 0:l.mediastatus,geoRestrictions:[]})})))}catch(e){console.error("Error processing video chunk starting at index ".concat(n,":"),e)}}return a}},68882:function(e,t,r){"use strict";r.d(t,{E:function(){return a}});let a=(e,t)=>{let r=document.createElement("a");r.href=e,r.type="hidden",r.download=t||e.split("/").pop()||"",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},86898:function(e,t,r){"use strict";r.d(t,{v:function(){return i}}),r(83109);var a=r(31955),n=r(55406);let o=e=>"true"===e||!0===e,i=e=>(0,n.b)().isOpenSearchResultsEnabled?(e?o(e.isOpenSearchResultsEnabled):o(a.Z.get("isOpenSearchResultsEnabled")))?"v2":"v1":"v1"},85950:function(e){e.exports={modal:"Modal_modal__JNobJ",large:"Modal_large__NOtL4"}},51624:function(e){e.exports={zoom:"OverlayComponent_zoom__KclRJ","slide-top-out":"OverlayComponent_slide-top-out__uJm4t"}}}]);